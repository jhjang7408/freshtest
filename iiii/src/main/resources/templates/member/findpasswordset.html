<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>FreshCart - eCommerce HTML Template</title>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta
            name="viewport"
            content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <meta name="description" content="" />
    <meta content="Codescandy" name="author" />

    <!-- Google tag (gtag.js) -->
    <script
            async
            th:src="@{https://www.googletagmanager.com/gtag/js?id=G-M8S4MT3EYG}"
    ></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() {
            dataLayer.push(arguments);
        }
        gtag("js", new Date());

        gtag("config", "G-M8S4MT3EYG");
    </script>

    <!-- Favicon icon-->
    <link
            rel="shortcut icon"
            type="image/x-icon"
            th:href="@{/images/favicon/favicon.ico}"
    />

    <!-- Libs CSS -->
    <link
            th:href="@{/libs/bootstrap-icons/font/bootstrap-icons.css}"
            rel="stylesheet"
    />
    <link
            th:href="@{/libs/feather-webfont/dist/feather-icons.css}"
            rel="stylesheet"
    />
    <link
            th:href="@{/libs/simplebar/dist/simplebar.min.css}"
            rel="stylesheet"
    />

    <!-- Theme CSS -->
    <link rel="stylesheet" th:href="@{/css/theme.min.css}" />
</head>

<body>
<!-- navigation -->
<div class="border-bottom shadow-sm">
    <nav class="navbar navbar-light py-2">
        <div
                class="container justify-content-center justify-content-lg-between"
        >
            <a class="navbar-brand" href="../index.html">
                <img
                        th:src="@{/images/logo/freshcart-logo.svg}"
                        alt=""
                        class="d-inline-block align-text-top"
                />
            </a>
            <span class="navbar-text">
            계정이 이미 있습니까?
            <a href="/member/signin" style="color: #007bff"
            >로그인 하러가기</a
            >
          </span>
        </div>
    </nav>
</div>

<main>
    <!-- section -->
    <section class="my-lg-14 my-8">
        <!-- container -->
        <div class="container">
            <!-- row -->
            <div class="row justify-content-center align-items-center">
                <div class="col-12 col-md-6 col-lg-4 order-lg-1 order-2">
                    <!-- img -->
                    <img
                            src="../assets/images/svg-graphics/fp-g.svg"
                            alt=""
                            class="img-fluid"
                    />
                </div>
                <div
                        class="col-12 col-md-6 offset-lg-1 col-lg-4 order-lg-2 order-1 d-flex align-items-center"
                >
                    <div>
                        <div class="mb-lg-9 mb-5">
                            <!-- heading -->
                            <h1 class="mb-2 h2 fw-bold">비밀번호 변경</h1>
                            <p>변경할 비밀번호를 입력하세요.</p>
                        </div>
                        <!-- form -->
                        <form class="row row-cols-1 row-cols-lg-2" id="passwordForm">
                            <!-- input -->
                            <div class="mb-3 col">
                                <label class="form-label">새로운 비밀번호</label>
                                <input type="password" class="form-control" placeholder="************" id="newPassword" name="password1"/>
                            </div>
                            <!-- input -->
                            <div class="mb-3 col">
                                <label class="form-label">비밀번호 확인</label>
                                <input type="password" class="form-control" placeholder="************" id="newPasswordCheck" name="password2"/>
                            </div>
                            <!-- button -->
                            <div class="mb-3">
                                <button class="btn btn-primary" id="save-password-btn">
                                    비밀번호 저장하기
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </section>
</main>

<!-- Footer -->
<!-- footer -->
<footer class="footer">
    <div class="container">
        <div class="row g-4 py-4">
            <div class="col-12 col-md-12 col-lg-8">
                <div class="row g-4">
                    <div class="col-6 col-sm-6 col-md-2">
                        <h6 class="mb-4">판매 등록</h6>
                        <!-- list -->
                        <ul class="nav flex-column">
                            <li class="nav-item mb-2">
                                <a href="#!" class="nav-link">판매 등록</a>
                            </li>
                        </ul>
                    </div>

                    <div class="col-6 col-sm-6 col-md-2">
                        <h6 class="mb-4">구매</h6>
                        <!-- list -->
                        <ul class="nav flex-column">
                            <li class="nav-item mb-2">
                                <a href="#!" class="nav-link">악세서리 구매</a>
                            </li>
                            <li class="nav-item mb-2">
                                <a href="#!" class="nav-link">자전거 구매</a>
                            </li>
                            <li class="nav-item mb-2">
                                <a href="#1" class="nav-link">장바구니</a>
                            </li>
                        </ul>
                    </div>

                    <div class="col-6 col-sm-6 col-md-2">
                        <h6 class="mb-4">커뮤니티</h6>
                        <ul class="nav flex-column">
                            <!-- list -->
                            <li class="nav-item mb-2">
                                <a href="#!" class="nav-link">가이드</a>
                            </li>
                            <li class="nav-item mb-2">
                                <a href="#!" class="nav-link">질문/정보 게시판</a>
                            </li>
                        </ul>
                    </div>

                    <div class="col-6 col-sm-6 col-md-2">
                        <h6 class="mb-4">공지</h6>
                        <ul class="nav flex-column">
                            <!-- list -->
                            <li class="nav-item mb-2">
                                <a href="#!" class="nav-link">공지</a>
                            </li>
                            <li class="nav-item mb-2">
                                <a href="#!" class="nav-link">이벤트</a>
                            </li>
                        </ul>
                    </div>

                    <div class="col-6 col-sm-6 col-md-3">
                        <h6 class="mb-4">고객센터</h6>
                        <ul class="nav flex-column">
                            <!-- list -->
                            <li class="nav-item mb-2">
                                <a href="#!" class="nav-link">1:1문의</a>
                            </li>
                            <li class="nav-item mb-2">
                                <a href="#!" class="nav-link">자주 묻는 질문</a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</footer>
<!-- Javascript-->
<!-- Libs JS -->
<script th:src="@{/libs/jquery/dist/jquery.min.js}"></script>
<script th:src="@{/libs/bootstrap/dist/js/bootstrap.bundle.min.js}"></script>
<script th:src="@{/libs/simplebar/dist/simplebar.min.js}"></script>

<!-- Theme JS -->
<script th:src="@{/js/theme.min.js}"></script>
<script>
    $(document).ready(function() {
        $('#save-password-btn').click(function(e) {
            e.preventDefault();
            const newPassword = $('#newPassword').val();
            const newPasswordCheck = $('#newPasswordCheck').val();

            if(newPassword !== newPasswordCheck) {
                alert('비밀번호가 일치하지 않습니다.');
                return;
            }

            const data = {
                'password' : newPassword
            };

            $.ajax({
                type : 'POST',
                url : '/mypage/changepass',
                data: data,
                success: function () {
                    alert('비밀번호 변경이 완료되었습니다.');
                },
                error: function(){
                    alert('비밀번호 변경 중 오류가 발생했습니다..')
                }
            }).done(function() {
                window.location.href = "/member/signin";
            });
        });
    });
</script>
</body>
</html>
